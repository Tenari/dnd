<template name="Character_create">
  <form class="character-create-form">
    <p class="character-name-row">
      What is your name?: <input type="text" name="name" class="character-name"/>
    </p>
    <p class="gender-alignment">
      <div>Gender: {{> dropdown options=genders className='genders'}}</div>
      <div>Alignment: {{> dropdown options=alignments className='alignments'}}</div>
    </p>
    {{#if reactiveVar 'name'}}
      <p>Pick a race: {{> dropdown options=races className='races'}} Pick a class: {{> dropdown options=classes className='classes'}} Pick a background: {{> dropdown options=backgrounds className='background-select'}}</p>
      <p>Race description: {{raceDescription}}</p>
      <p>Class description: {{classDescription}}</p>
      <h4>Ability scores:</h4>
      <p>Racial bonus: {{racialBonus}}</p>
      <ul class="abilities-list">
        remaining buy points: {{reactiveVar 'buyPoints'}}
        {{#each ability in abilities}}
          <li>
            <span class="ability-label">{{ability.label}}</span>
            <button class="decrement" data-key="{{ability.key}}">-</button><span class="score">{{reactiveVar ability.key}}</span><button class="increment" data-key="{{ability.key}}">+</button>
            {{racialBonusFor ability}}
          </li>
        {{/each}}
      </ul>
      {{#unless reactiveVar 'buyPoints'}}
        <h4>Class features</h4>
        {{#each feature in classFeatures}}
          <div>
            <div><strong>{{feature.name}}:</strong></div>
            {{#each line in feature.desc}}
              <div>{{line}}</div>
            {{/each}}
          </div>
        {{/each}}
        {{#if classIs 'cleric'}}
          {{> clericSetup domain=currentDomain}}
        {{/if}}
        {{#if doubleProficiencies}}
          <p>Double Proficiencies: {{doubleProficiencies}}</p>
        {{/if}}
        <p>Proficiencies: {{proficiencies}}</p>
        {{#if extraProficiencies}}
          <p>
            Choose extra proficiencies
            {{#each prof in proficiencyChoices}}
              <div>
                Choose {{prof.max}}
                {{> multiselect options=prof.options max=prof.max name=prof.name className='proficiency-select'}}
              </div>
            {{/each}}
          </p>
        {{/if}}
        <p>Languages: {{reactiveVar 'languages'}}</p>
        {{#if extraLanguages}}
          <p>
            Choose extra languages
            {{#each lang in languageChoices}}
              {{> dropdown options=languages className='language-select' key=lang}}
            {{/each}}
          </p>
        {{/if}}
        <h4><a href="javascript:void(0)" data-tab="buy" class="items-tab">Buy</a> or <a href="javascript:void(0)" data-tab="choose" class="items-tab">Choose</a> Items</h4>
        {{#if itemsTab 'buy'}}
          <p>Remaining Wealth: {{remainingWealth}}gp | Total weight: {{itemsWeight}}lbs / {{carryingCapacity}}lbs</p>
          <div class="items-buy">
            <ul class="bought-items">
              {{#each myItems}}
                <li data-key="{{key}}">{{> item}}</li>
              {{/each}}
            </ul>
            <ul class="item-list">
              <input class="item-filter" type="text"/>
              {{#each shopItems}}
                <li data-key="{{key}}">{{> item}}</li>
              {{/each}}
            </ul>
          </div>
        {{else if itemsTab 'choose'}}
          <p>Automatic Items: {{freeItems}}</p>
          <p>extra gp: {{bgGp}}</p>
          <div>
            {{#each list in itemChoice}}
              {{> dropdown options=list className='item-choice'}}
            {{/each}}
          </div>
        {{/if}}
        <div><button class="submit-character">CREATE CHARACTER!!!</button></div>
      {{/unless}}
    {{/if}}
  </form>
</template>
